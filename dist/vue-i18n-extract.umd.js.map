{"version":3,"file":"vue-i18n-extract.umd.js","sources":["../src/config-file/vue-i18n-extract.config.ts","../src/config-file/index.ts","../src/create-report/vue-files.ts","../src/create-report/language-files.ts","../src/create-report/report.ts","../src/create-report/index.ts","../src/index.ts"],"sourcesContent":["export default {\n  // Options documented in vue-i18n-extract readme.\n  vueFiles: './src/**/*.?(js|vue)',\n  languageFiles: './lang/**/*.?(json|yaml|yml|js)',\n  exclude: [],\n  output: false,\n  add: false,\n  remove: false,\n  ci: false,\n  separator: '.',\n  noEmptyTranslation: '',\n  missingTranslationString: '',\n};\n","import cac from 'cac';\nimport fs from 'fs';\nimport path from 'path';\nimport defaultConfig from './vue-i18n-extract.config';\n\nexport function initCommand(): void {\n  fs.writeFileSync(\n    path.resolve(process.cwd(), './vue-i18n-extract.config.js'),\n    `module.exports = ${JSON.stringify(defaultConfig, null, 2)}`,\n  );\n}\n\nexport function resolveConfig (): Record<string, string>  {\n  const argvOptions = cac().parse(process.argv, { run: false }).options;\n\n  let options;\n\n  try {\n    const pathToConfigFile = path.resolve(process.cwd(), './vue-i18n-extract.config.js');\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\n    const configOptions = require(pathToConfigFile);\n\n    console.info(`\\nUsing config file found at ${pathToConfigFile}`);\n\n    options = {\n      ...configOptions,\n      ...argvOptions\n    };\n  } catch {\n    options = argvOptions;\n  }\n\n  options.exclude = Array.isArray(options.exclude) ? options.exclude : [options.exclude];\n\n  return options;\n}\n","import { SimpleFile, I18NItemWithBounding } from '../types';\nimport isValidGlob from 'is-valid-glob';\nimport glob from 'glob';\nimport fs from 'fs';\n\nexport function readVueFiles (src: string): SimpleFile[] {\n  // Replace backslash path segments to make the path work with the glob package.\n  // https://github.com/Spittal/vue-i18n-extract/issues/159\n  const normalizedSrc = src.replace(/\\\\/g, '/');\n  if (!isValidGlob(normalizedSrc)) {\n    throw new Error(`vueFiles isn't a valid glob pattern.`);\n  }\n\n  const targetFiles = glob.sync(normalizedSrc);\n\n  if (targetFiles.length === 0) {\n    throw new Error('vueFiles glob has no files.');\n  }\n\n  return targetFiles.map((f) => {\n    const fileName = f.replace(process.cwd(), '.');\n    return { fileName, path: f, content: fs.readFileSync(f, 'utf8') };\n  });\n}\n\nfunction* getMatches (file: SimpleFile, regExp: RegExp, captureGroup = 1): IterableIterator<I18NItemWithBounding> {\n  while (true) {\n    const match = regExp.exec(file.content);\n    if (match === null) {\n      break;\n    }\n    const path = match[captureGroup];\n\n    const pathAtIndex = file.content.indexOf(path);\n    const previousCharacter = file.content.charAt(pathAtIndex - 1);\n    const nextCharacter = file.content.charAt(pathAtIndex + path.length);\n\n    const line = (file.content.substring(0, match.index).match(/\\n/g) || []).length + 1;\n    yield {\n      path,\n      previousCharacter,\n      nextCharacter,\n      file: file.fileName,\n      line,\n    };\n  }\n}\n\n/**\n * Extracts translation keys from methods such as `$t` and `$tc`.\n *\n * - **regexp pattern**: (?:[$\\s.:\"'`+\\(\\[\\{]t[cm]?)\\(\n *\n *   **description**: Matches the sequence t(, tc( or tm(, optionally with either “$”, SPACE, “.”, “:”, “\"”, “'”,\n *   “`”, \"+\", \"(\", \"[\" or \"{\" in front of it.\n *\n * - **regexp pattern**: ([\"'`])\n *\n *   **description**: 1. capturing group. Matches either “\"”, “'”, or “`”.\n *\n * - **regexp pattern**: ((?:[^\\\\]|\\\\.)*?)\n *\n *   **description**: 2. capturing group. Matches anything except a backslash\n *   *or* matches any backslash followed by any character (e.g. “\\\"”, “\\`”, “\\t”, etc.)\n *\n * - **regexp pattern**: \\1\n *\n *   **description**: matches whatever was matched by capturing group 1 (e.g. the starting string character)\n *\n * @param file a file object\n * @returns a list of translation keys found in `file`.\n */\n function extractMethodMatches (file: SimpleFile): I18NItemWithBounding[] {\n  const methodRegExp = /(?:[$\\s.:\"'`+\\(\\[\\{]t[cm]?)\\(\\s*?([\"'`])((?:[^\\\\]|\\\\.)*?)\\1/g;\n  return [ ...getMatches(file, methodRegExp, 2) ];\n}\n\nfunction extractComponentMatches (file: SimpleFile): I18NItemWithBounding[] {\n  const componentRegExp = /(?:(?:<|h\\()(?:i18n|Translation))(?:.|\\n)*?(?:\\s(?:(?:key)?)path(?:=|: )(\"|'))((?:[^\\\\]|\\\\.)*?)\\1/gi;\n  return [ ...getMatches(file, componentRegExp, 2) ];\n}\n\nfunction extractDirectiveMatches (file: SimpleFile): I18NItemWithBounding[] {\n  const directiveRegExp = /\\bv-t(?:\\.[\\w-]+)?=\"'((?:[^\\\\]|\\\\.)*?)'\"/g;\n  return [ ...getMatches(file, directiveRegExp) ];\n}\n\nexport function extractI18NItemsFromVueFiles (sourceFiles: SimpleFile[]): I18NItemWithBounding[] {\n  return sourceFiles.reduce((accumulator, file) => {\n    const methodMatches = extractMethodMatches(file);\n    const componentMatches = extractComponentMatches(file);\n    const directiveMatches = extractDirectiveMatches(file);\n    return [\n      ...accumulator,\n      ...methodMatches,\n      ...componentMatches,\n      ...directiveMatches,\n    ];\n  }, [] as I18NItemWithBounding[]);\n}\n\n// This is a convenience function for users implementing in their own projects, and isn't used internally\nexport function parseVueFiles (vueFiles: string): I18NItemWithBounding[] {\n  return extractI18NItemsFromVueFiles(readVueFiles(vueFiles));\n}\n","import path from 'path';\nimport fs from 'fs';\nimport glob from 'glob';\nimport Dot from 'dot-object';\nimport yaml from 'js-yaml';\nimport isValidGlob from 'is-valid-glob';\nimport { SimpleFile, I18NLanguage, I18NItem } from '../types';\n\nexport function readLanguageFiles (src: string): SimpleFile[] {\n  // Replace backslash path segments to make the path work with the glob package.\n  // https://github.com/Spittal/vue-i18n-extract/issues/159\n  const normalizedSrc = src.replace(/\\\\/g, '/');\n  if (!isValidGlob(normalizedSrc)) {\n    throw new Error(`languageFiles isn't a valid glob pattern.`);\n  }\n\n  const targetFiles = glob.sync(normalizedSrc);\n\n  if (targetFiles.length === 0) {\n    throw new Error('languageFiles glob has no files.');\n  }\n\n  return targetFiles.map(f => {\n    const langPath = path.resolve(process.cwd(), f);\n\n    const extension = langPath.substring(langPath.lastIndexOf('.')).toLowerCase();\n    const isJSON = extension === '.json';\n    const isYAML = extension === '.yaml' || extension === '.yml';\n\n    let langObj;\n    if (isJSON) {\n      langObj = JSON.parse(fs.readFileSync(langPath, 'utf8'));\n    } else if (isYAML) {\n      langObj = yaml.load(fs.readFileSync(langPath, 'utf8'));\n    } else {\n      langObj = eval(fs.readFileSync(langPath, 'utf8'));\n    }\n\n    const fileName = f.replace(process.cwd(), '.');\n\n    return { path: f, fileName, content: JSON.stringify(langObj) };\n  });\n}\n\nexport function extractI18NLanguageFromLanguageFiles (languageFiles: SimpleFile[], dot: DotObject.Dot = Dot): I18NLanguage {\n  return languageFiles.reduce((accumulator, file) => {\n    const language = file.fileName.substring(file.fileName.lastIndexOf('/') + 1, file.fileName.lastIndexOf('.'));\n\n    if (!accumulator[language]) {\n      accumulator[language] = [];\n    }\n\n    const flattenedObject = dot.dot(JSON.parse(file.content));\n    Object.keys(flattenedObject).forEach((key) => {\n      accumulator[language].push({\n        path: key,\n        file: file.fileName,\n      });\n    });\n\n    return accumulator;\n  }, {});\n}\n\nexport function writeMissingToLanguageFiles (parsedLanguageFiles: SimpleFile[], missingKeys: I18NItem[], dot: DotObject.Dot = Dot, noEmptyTranslation = '', missingTranslationString = '', jsonIndentation = 2): void {\n  parsedLanguageFiles.forEach(languageFile => {\n    const languageFileContent = JSON.parse(languageFile.content);\n\n    missingKeys.forEach(item => {\n      if (item.language && languageFile.fileName.includes(item.language) || !item.language) {\n        const addDefaultTranslation = (noEmptyTranslation) && ((noEmptyTranslation === '*') || (noEmptyTranslation === item.language));\n        dot.str(item.path, addDefaultTranslation ? item.path : missingTranslationString === 'null' ? null : missingTranslationString, languageFileContent);\n      }\n    });\n\n    writeLanguageFile(languageFile, languageFileContent, jsonIndentation);\n  });\n}\n\nexport function removeUnusedFromLanguageFiles (parsedLanguageFiles: SimpleFile[], unusedKeys: I18NItem[], dot: DotObject.Dot = Dot, jsonIndentation = 2): void {\n  parsedLanguageFiles.forEach(languageFile => {\n    const languageFileContent = JSON.parse(languageFile.content);\n\n    unusedKeys.forEach(item => {\n      if (item.language && languageFile.fileName.includes(item.language)) {\n        dot.delete(item.path, languageFileContent);\n      }\n    });\n\n    writeLanguageFile(languageFile, languageFileContent);\n  });\n}\n\nfunction writeLanguageFile (languageFile: SimpleFile, newLanguageFileContent: unknown, jsonIndentation = 2) {\n  const fileExtension = languageFile.fileName.substring(languageFile.fileName.lastIndexOf('.') + 1);\n    const filePath = languageFile.path;\n    const stringifiedContent = JSON.stringify(newLanguageFileContent, null, jsonIndentation);\n\n    if (fileExtension === 'json') {\n      fs.writeFileSync(filePath, stringifiedContent);\n    } else if (fileExtension === 'js') {\n      const jsFile = `module.exports = ${stringifiedContent}; \\n`;\n      fs.writeFileSync(filePath, jsFile);\n    } else if (fileExtension === 'yaml' || fileExtension === 'yml') {\n      const yamlFile = yaml.dump(newLanguageFileContent);\n      fs.writeFileSync(filePath, yamlFile);\n    } else {\n      throw new Error(`Language filetype of ${fileExtension} not supported.`)\n    }\n}\n\n// This is a convenience function for users implementing in their own projects, and isn't used internally\nexport function parselanguageFiles (languageFiles: string, dot: DotObject.Dot = Dot): I18NLanguage {\n  return extractI18NLanguageFromLanguageFiles(readLanguageFiles(languageFiles), dot);\n}\n","import fs from 'fs';\nimport { DetectionType, I18NItem, I18NItemWithBounding, I18NLanguage, I18NReport } from '../types';\n\nfunction stripBounding (item: I18NItemWithBounding): I18NItem {\n  return {\n    path: item.path,\n    file: item.file,\n    line: item.line,\n  }\n}\n\nfunction mightBeDynamic (item: I18NItemWithBounding): boolean {\n  return item.path.includes('${') && !!item.previousCharacter.match(/`/g) && !!item.nextCharacter.match(/`/g);\n}\n\n// Looping through the arays multiple times might not be the most effecient, but it's the easiest to read and debug. Which at this scale is an accepted trade-off.\nexport function extractI18NReport (vueItems: I18NItemWithBounding[], languageFiles: I18NLanguage, detect: DetectionType[]): I18NReport {\n  const missingKeys: I18NItem[] = [];\n  const unusedKeys: I18NItem[] = [];\n  const maybeDynamicKeys: I18NItem[] = [];\n\n  if (detect.includes(DetectionType.Dynamic)) {\n   maybeDynamicKeys. push( ...vueItems\n    .filter(vueItem => mightBeDynamic(vueItem))\n    .map(vueItem => stripBounding(vueItem)));\n   }\n\n  Object.keys(languageFiles).forEach(language => {\n    const languageItems = languageFiles[language];\n\n    if (detect.includes(DetectionType.Missing)) {\n    const missingKeysInLanguage = vueItems\n      .filter(vueItem => !mightBeDynamic(vueItem))\n      .filter(vueItem => !languageItems.some(languageItem => vueItem.path === languageItem.path))\n      .map(vueItem => ({ ...stripBounding(vueItem), language }));\n\n    missingKeys.push(...missingKeysInLanguage);\n    }\n\n    if (detect.includes(DetectionType.Unused)) {\n    const unusedKeysInLanguage = languageItems\n      .filter(languageItem => !vueItems.some(vueItem => languageItem.path === vueItem.path || languageItem.path.startsWith(vueItem.path + '.')))\n      .map(languageItem => ({ ...languageItem, language }));\n\n    unusedKeys.push(...unusedKeysInLanguage);\n    }\n  });\n\n  return {\n    missingKeys,\n    unusedKeys,\n    maybeDynamicKeys,\n  };\n}\n\nexport async function writeReportToFile (report: I18NReport, writePath: string): Promise<NodeJS.ErrnoException | void> {\n  const reportString = JSON.stringify(report);\n  return new Promise((resolve, reject) => {\n    fs.writeFile(\n      writePath,\n      reportString,\n      (err) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n        resolve();\n      },\n    );\n  });\n}\n\n","import path from 'path';\nimport { ReportOptions, I18NReport, DetectionType } from '../types';\nimport { readVueFiles, extractI18NItemsFromVueFiles } from './vue-files';\nimport { readLanguageFiles, extractI18NLanguageFromLanguageFiles, removeUnusedFromLanguageFiles, writeMissingToLanguageFiles } from './language-files';\nimport { extractI18NReport,  writeReportToFile } from './report';\nimport Dot from 'dot-object';\n\nexport async function createI18NReport (options: ReportOptions): Promise<I18NReport> {\n  const {\n    vueFiles: vueFilesGlob,\n    languageFiles: languageFilesGlob,\n    output,\n    add,\n    remove,\n    exclude = [],\n    ci,\n    separator,\n    noEmptyTranslation = '',\n    missingTranslationString = '',\n    jsonIndentation = 2,\n    detect = [DetectionType.Missing, DetectionType.Unused, DetectionType.Dynamic]\n  } = options;\n\n  if (!vueFilesGlob) throw new Error('Required configuration vueFiles is missing.');\n  if (!languageFilesGlob) throw new Error('Required configuration languageFiles is missing.');\n\n  let issuesToDetect = Array.isArray(detect) ? detect : [detect];\n  const invalidDetectOptions = issuesToDetect.filter(item => !Object.values(DetectionType).includes(item));\n  if (invalidDetectOptions.length) {\n    throw new Error(`Invalid 'detect' value(s): ${invalidDetectOptions}`);\n  }\n\n  const dot = typeof separator === 'string' ? new Dot(separator) : Dot;\n  const vueFiles = readVueFiles(path.resolve(process.cwd(), vueFilesGlob));\n  const languageFiles = readLanguageFiles(path.resolve(process.cwd(), languageFilesGlob));\n\n  const I18NItems = extractI18NItemsFromVueFiles(vueFiles);\n  const I18NLanguage = extractI18NLanguageFromLanguageFiles(languageFiles, dot);\n\n  const report = extractI18NReport(I18NItems, I18NLanguage, issuesToDetect);\n\n  report.unusedKeys = report.unusedKeys.filter(key =>\n      !exclude.filter(excluded => key.path.startsWith(excluded)).length)\n\n  if (report.missingKeys.length) console.info('\\nMissing Keys'), console.table(report.missingKeys);\n  if (report.unusedKeys.length) console.info('\\nUnused Keys'), console.table(report.unusedKeys);\n  if (report.maybeDynamicKeys.length) console.warn('\\nSuspected Dynamic Keys Found\\nvue-i18n-extract does not compile Vue templates and therefore can not infer the correct key for the following keys.'), console.table(report.maybeDynamicKeys);\n\n  if (output) {\n    await writeReportToFile(report, path.resolve(process.cwd(), output));\n    console.info(`\\nThe report has been has been saved to ${output}`);\n  }\n\n  if (remove && report.unusedKeys.length) {\n    removeUnusedFromLanguageFiles(languageFiles, report.unusedKeys, dot);\n    console.info('\\nThe unused keys have been removed from your language files.');\n  }\n\n  if (add && report.missingKeys.length) {\n    writeMissingToLanguageFiles(languageFiles, report.missingKeys, dot, noEmptyTranslation, missingTranslationString, jsonIndentation);\n    console.info('\\nThe missing keys have been added to your language files.');\n  }\n\n  if (ci && report.missingKeys.length) {\n    throw new Error(`${report.missingKeys.length} missing keys found.`);\n  }\n\n  if (ci && report.unusedKeys.length) {\n    throw new Error(`${report.unusedKeys.length} unused keys found.`);\n  }\n\n  return report;\n}\n\nexport * from './vue-files';\nexport * from './language-files';\nexport * from './report';\n","export * from './config-file';\nexport * from './create-report';\nexport * from './types';\n\nprocess.on('uncaughtException', (err) => {\n  console.error('[vue-i18n-extract]', err);\n  process.exit(1);\n});\n\nprocess.on('unhandledRejection', (err) => {\n  console.error('[vue-i18n-extract]', err);\n  process.exit(1);\n});\n"],"names":["vueFiles","languageFiles","exclude","output","add","remove","ci","separator","noEmptyTranslation","missingTranslationString","initCommand","fs","writeFileSync","path","process","cwd","JSON","stringify","defaultConfig","resolveConfig","argvOptions","parse","argv","run","options","pathToConfigFile","resolve","configOptions","require","console","info","readVueFiles","src","normalizedSrc","replace","isValidGlob","Error","targetFiles","glob","sync","length","map","fileName","f","content","readFileSync","getMatches","file","regExp","captureGroup","match","exec","indexOf","charAt","pathAtIndex","line","substring","index","extractMethodMatches","methodRegExp","extractComponentMatches","componentRegExp","extractDirectiveMatches","directiveRegExp","extractI18NItemsFromVueFiles","sourceFiles","reduce","accumulator","methodMatches","componentMatches","directiveMatches","readLanguageFiles","langPath","extension","lastIndexOf","toLowerCase","isJSON","isYAML","langObj","load","eval","extractI18NLanguageFromLanguageFiles","dot","Dot","language","flattenedObject","Object","keys","forEach","key","push","writeMissingToLanguageFiles","parsedLanguageFiles","missingKeys","jsonIndentation","languageFile","languageFileContent","item","includes","addDefaultTranslation","str","writeLanguageFile","removeUnusedFromLanguageFiles","unusedKeys","delete","newLanguageFileContent","fileExtension","stringifiedContent","stripBounding","mightBeDynamic","previousCharacter","nextCharacter","extractI18NReport","vueItems","detect","DetectionType","Dynamic","filter","vueItem","languageItems","Missing","missingKeysInLanguage","some","languageItem","Unused","unusedKeysInLanguage","startsWith","maybeDynamicKeys","writeReportToFile","report","writePath","createI18NReport","vueFilesGlob","languageFilesGlob","issuesToDetect","Array","isArray","invalidDetectOptions","values","I18NItems","I18NLanguage","excluded","table","warn","on","error","err","exit"],"mappings":"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"}